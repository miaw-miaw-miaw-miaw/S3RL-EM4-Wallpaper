const wallpaperSets = [
    {
        name: "Wallpaper 1",
        main: "./src/Wallpapers/Wallpaper1/Wallpaper1.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper1/Wallpaper1.jpeg" },
            { name: "Alb", path: "./src/Wallpapers/Wallpaper1/Wallpaper1-Alb.jpeg" },
            { name: "Min", path: "./src/Wallpapers/Wallpaper1/Wallpaper1-Min.jpeg" },
            { name: "Min-Alb", path: "./src/Wallpapers/Wallpaper1/Wallpaper1-Min-Alb.jpeg" },
            { name: "Min-Stroke", path: "./src/Wallpapers/Wallpaper1/Wallpaper1-Min-Stroke.jpeg" },
            { name: "Min-Stroke-Alb", path: "./src/Wallpapers/Wallpaper1/Wallpaper1-Min-Stroke-Alb.jpeg" }
        ]
    },
    {
        name: "Wallpaper 2",
        main: "./src/Wallpapers/Wallpaper2/Wallpaper2.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper2/Wallpaper2.jpeg" },
            { name: "Alb", path: "./src/Wallpapers/Wallpaper2/Wallpaper2-Alb.jpeg" },
            { name: "Min", path: "./src/Wallpapers/Wallpaper2/Wallpaper2-Min.jpeg" },
            { name: "Min-Alb", path: "./src/Wallpapers/Wallpaper2/Wallpaper2-Min-Alb.jpeg" },
            { name: "Min-Stroke", path: "./src/Wallpapers/Wallpaper2/Wallpaper2-Min-Stroke.jpeg" },
            { name: "Min-Stroke-Alb", path: "./src/Wallpapers/Wallpaper2/Wallpaper2-Min-Stroke-Alb.jpeg" }
        ]
    },
    {
        name: "Wallpaper 3",
        main: "./src/Wallpapers/Wallpaper3/Wallpaper3.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper3/Wallpaper3.jpeg" },
            { name: "Alb", path: "./src/Wallpapers/Wallpaper3/Wallpaper3-Alb.jpeg" },
            { name: "Min", path: "./src/Wallpapers/Wallpaper3/Wallpaper3-Min.jpeg" },
            { name: "Min-Alb", path: "./src/Wallpapers/Wallpaper3/Wallpaper3-Min-Alb.jpeg" },
            { name: "Min-Stroke", path: "./src/Wallpapers/Wallpaper3/Wallpaper3-Min-Stroke.jpeg" },
            { name: "Min-Stroke-Alb", path: "./src/Wallpapers/Wallpaper3/Wallpaper3-Min-Stroke-Alb.jpeg" }
        ]
    },
    {
        name: "Wallpaper 4",
        main: "./src/Wallpapers/Wallpaper4/Wallpaper4.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper4/Wallpaper4.jpeg" },
            { name: "Alb", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Alb.jpeg" },
            { name: "Efect", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Efect.jpeg" },
            { name: "Alb-Efect", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Alb-Efect.jpeg" },
            { name: "Min", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min.jpeg" },
            { name: "Min-Alb", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min-Alb.jpeg" },
            { name: "Min-Stroke", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min-Stroke.jpeg" },
            { name: "Min-Stroke-Alb", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min-Stroke-Alb.jpeg" },
            { name: "Min-Efect", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min-Efect.jpeg" },
            { name: "Min-Alb-Efect", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min-Alb-Efect.jpeg" },
            { name: "Min-Stroke-Efect", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min-Stroke-Efect.jpeg" },
            { name: "Min-Stroke-Alb-Efect", path: "./src/Wallpapers/Wallpaper4/Wallpaper4-Min-Stroke-Alb-Efect.jpeg" }
        ]
    },
    {
        name: "Wallpaper 5",
        main: "./src/Wallpapers/Wallpaper5/Wallpaper5-Dark.jpeg",
        variants: [
            { name: "Dark", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Dark.jpeg" },
            { name: "Light", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Light.jpeg" },
            { name: "Alb-Dark", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Alb-Dark.jpeg" },
            { name: "Alb-Light", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Alb-Light.jpeg" },
            { name: "Min-Dark", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Dark.jpeg" },
            { name: "Min-Light", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Light.jpeg" },
            { name: "Min-Alb-Dark", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Alb-Dark.jpeg" },
            { name: "Min-Alb-Light", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Alb-Light.jpeg" },
            { name: "Min-Stroke-Dark", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Stroke-Dark.jpeg" },
            { name: "Min-Stroke-Light", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Stroke-Light.jpeg" },
            { name: "Min-Stroke-Alb-Dark", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Stroke-Alb-Dark.jpeg" },
            { name: "Min-Stroke-Alb-Light", path: "./src/Wallpapers/Wallpaper5/Wallpaper5-Min-Stroke-Alb-Light.jpeg" }
        ]
    },
    {
        name: "Wallpaper 6",
        main: "./src/Wallpapers/Wallpaper6/Wallpaper6.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper6/Wallpaper6.jpeg" },
            { name: "ALT", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-ALT.jpeg" },
            { name: "Alb", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Alb.jpeg" },
            { name: "Alb-ALT", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Alb-ALT.jpeg" },
            { name: "Min", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min.jpeg" },
            { name: "Min-ALT", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min-ALT.jpeg" },
            { name: "Min-Alb", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min-Alb.jpeg" },
            { name: "Min-Alb-ALT", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min-Alb-ALT.jpeg" },
            { name: "Min-Stroke", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min-Stroke.jpeg" },
            { name: "Min-Stroke-ALT", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min-Stroke-ALT.jpeg" },
            { name: "Min-Stroke-Alb", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min-Stroke-Alb.jpeg" },
            { name: "Min-Stroke-Alb-ALT", path: "./src/Wallpapers/Wallpaper6/Wallpaper6-Min-Stroke-Alb-ALT.jpeg" }
        ]
    },
    {
        name: "Wallpaper 7",
        main: "./src/Wallpapers/Wallpaper7/Wallpaper7.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper7/Wallpaper7.jpeg" },
            { name: "ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-ALT.jpeg" },
            { name: "Dark", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Dark.jpeg" },
            { name: "Dark-ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Dark-ALT.jpeg" },
            { name: "Light", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Light.jpeg" },
            { name: "Alb", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Alb.jpeg" },
            { name: "Alb-ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Alb-ALT.jpeg" },
            { name: "Alb-Dark", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Alb-Dark.jpeg" },
            { name: "Alb-Dark-ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Alb-Dark-ALT.jpeg" },
            { name: "Alb-Light", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Alb-Light.jpeg" },
            { name: "Min", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min.jpeg" },
            { name: "Min-ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-ALT.jpeg" },
            { name: "Min-Dark", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Dark.jpeg" },
            { name: "Min-Dark-ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Dark-ALT.jpeg" },
            { name: "Min-Light", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Light.jpeg" },
            { name: "Min-Alb", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Alb.jpeg" },
            { name: "Min-Alb-ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Alb-ALT.jpeg" },
            { name: "Min-Alb-Dark", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Alb-Dark.jpeg" },
            { name: "Min-Alb-Dark-ALT", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Alb-Dark-ALT.jpeg" },
            { name: "Min-Alb-Light", path: "./src/Wallpapers/Wallpaper7/Wallpaper7-Min-Alb-Light.jpeg" }
        ]
    },
    {
        name: "Wallpaper 8",
        main: "./src/Wallpapers/Wallpaper8.jpeg",
        variants: [{ name: "Original", path: "./src/Wallpapers/Wallpaper8.jpeg" }]
    },
    {
        name: "Wallpaper 9",
        main: "./src/Wallpapers/Wallpaper9/Wallpaper9.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper9/Wallpaper9.jpeg" },
            { name: "No S3RL", path: "./src/Wallpapers/Wallpaper9/Wallpaper9-NoS3RL.jpeg" }
        ]
    },
    {
        name: "Wallpaper 10",
        main: "./src/Wallpapers/Wallpaper10.jpeg",
        variants: [{ name: "Original", path: "./src/Wallpapers/Wallpaper10.jpeg" }]
    },
    {
        name: "Wallpaper 11",
        main: "./src/Wallpapers/Wallpaper11/Wallpaper11.jpeg",
        variants: [
            { name: "Original", path: "./src/Wallpapers/Wallpaper11/Wallpaper11.jpeg" },
            { name: "ALT", path: "./src/Wallpapers/Wallpaper11/Wallpaper11-ALT.jpeg" },
            { name: "Min", path: "./src/Wallpapers/Wallpaper11/Wallpaper11-Min.jpeg" },
            { name: "Min-ALT", path: "./src/Wallpapers/Wallpaper11/Wallpaper11-Min-ALT.jpeg" }
        ]
    },
    {
        name: "Wallpaper 12",
        main: "./src/Wallpapers/Wallpaper12.jpeg",
        variants: [{ name: "Original", path: "./src/Wallpapers/Wallpaper12.jpeg" }]
    },
    {
        name: "Wallpaper 13",
        main: "./src/Wallpapers/Wallpaper13/Wallpaper13-Dark.jpeg",
        variants: [
            { name: "Dark", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-Dark.jpeg" },
            { name: "Light", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-Light.jpeg" },
            { name: "ALT", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-ALT.jpeg" },
            { name: "ALT 2", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-ALT-2.jpeg" },
            { name: "ALT 3", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-ALT-3.jpeg" },
            { name: "ALT 4", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-ALT-4.jpeg" },
            { name: "ALT 5", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-ALT-5.jpeg" },
            { name: "ALT 6", path: "./src/Wallpapers/Wallpaper13/Wallpaper13-ALT-6.jpeg" }
        ]
    },
    {
        name: "Wallpaper 14",
        main: "./src/Wallpapers/Wallpaper14.jpeg",
        variants: [{ name: "Original", path: "./src/Wallpapers/Wallpaper14.jpeg" }]
    },
    {
        name: "Wallpaper 15",
        main: "./src/Wallpapers/Wallpaper15/Wallpaper15-1.jpeg",
        variants: [
            { name: "Version 1", path: "./src/Wallpapers/Wallpaper15/Wallpaper15-1.jpeg" },
            { name: "Version 2", path: "./src/Wallpapers/Wallpaper15/Wallpaper15-2.jpeg" },
            { name: "Version 3", path: "./src/Wallpapers/Wallpaper15/Wallpaper15-3.jpeg" }
        ]
    },
    {
        name: "Wallpaper 16",
        main: "./src/Wallpapers/Wallpaper16.jpeg",
        variants: [{ name: "Original", path: "./src/Wallpapers/Wallpaper16.jpeg" }]
    }
];

const list = document.getElementById('wallpaper-list');
const modal = document.getElementById('wallpaper-modal');
const modalImg = document.getElementById('modal-preview');
const downloadBtn = document.getElementById('download-btn');
const variantsList = document.getElementById('variants-list');
const closeModal = document.querySelector('.close-modal');
const mobileBlocker = document.getElementById('mobile-blocker');
const mainContent = document.querySelector('body > .ctn'); // Select the main content wrapper

function isPhone() {
    const userAgent = navigator.userAgent || navigator.vendor || window.opera;

    // Regex for common phone user agent strings
    const hasPhoneUA = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|rim)|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(userAgent.substr(0, 4));

    // Regex for common tablet user agent strings
    const hasTabletUA = /(ipad|tablet|playbook|silk)|(android(?!.*mobile))/i.test(userAgent);

    // Consider it a phone if:
    // 1. It matches phone UA patterns AND does NOT match tablet UA patterns.
    // 2. OR, if the screen width is typically phone-sized (e.g., < 600px) AND it does NOT match tablet UA patterns.
    const isSmallWidth = window.innerWidth < 600;

    return (hasPhoneUA && !hasTabletUA) || (isSmallWidth && !hasTabletUA);
}

if (isPhone()) {
    mobileBlocker.style.display = 'flex';
    if (mainContent) {
        mainContent.style.display = 'none';
    }
    const mainElement = document.querySelector('main');
    if (mainElement) {
        mainElement.style.display = 'none';
    }
    const footerElement = document.querySelector('footer');
    if (footerElement) {
        footerElement.style.display = 'none';
    }
    document.body.style.overflow = 'hidden';
} else {
    if (mobileBlocker) {
        mobileBlocker.style.display = 'none';
    }
}


function openModal(set) {
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
    updateModalPreview(set.variants[0]);
    
    variantsList.innerHTML = '';
    const variantsContainer = document.querySelector('.variants-container');
    if (set.variants.length <= 1) {
        variantsContainer.style.display = 'none';
    } else {
        variantsContainer.style.display = 'block';
        set.variants.forEach((variant) => {
            const thumb = document.createElement('img');
            thumb.src = variant.path;
            thumb.className = 'variant-thumb';
            thumb.alt = variant.name;
            thumb.title = variant.name;
            
            thumb.onclick = () => {
                document.querySelectorAll('.variant-thumb').forEach(t => t.classList.remove('active'));
                thumb.classList.add('active');
                updateModalPreview(variant);
            };
            
            if (variant.path === set.main) thumb.classList.add('active');
            
            variantsList.appendChild(thumb);
        });
    }
}

function updateModalPreview(variant) {
    modalImg.src = variant.path;
    downloadBtn.href = variant.path;
    downloadBtn.setAttribute('download', '');
}

closeModal.onclick = () => {
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
};

window.onclick = (event) => {
    if (event.target == modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
};

wallpaperSets.forEach((set) => {
    const item = document.createElement('div');
    item.className = 'wallpaper-item';
    
    const img = document.createElement('img');
    img.src = set.main;
    img.alt = set.name;
    img.loading = 'lazy';
    
    const info = document.createElement('div');
    info.className = 'wallpaper-info';
    const variantsCount = set.variants.length > 1 ? `<p>${set.variants.length} Variants Available</p>` : '';
    info.innerHTML = `<h3>${set.name}</h3>${variantsCount}`;
    
    item.appendChild(img);
    item.appendChild(info);
    
    item.addEventListener('click', () => openModal(set));
    
    list.appendChild(item);
});
